<?xml version="1.0" encoding="UTF-8"?>
<Module>
<ModulePrefs title="Agronomic/Soils Data Download">    
<OAuth>
   <Service name="google">
      <Access url="https://www.google.com/accounts/OAuthGetAccessToken" method="GET" />
      <Request url="https://www.google.com/accounts/OAuthGetRequestToken?scope=https://spreadsheets.google.com/feeds/" method="GET" />
      <Authorization url="https://www.google.com/accounts/OAuthAuthorizeToken" />
   </Service>
</OAuth>
</ModulePrefs>
<Content type="html"><![CDATA[
  <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css">
   <script src="https://www.google.com/jsapi?key=ABQIAAAArXt77YptylBNPFEy0AgJxBQV4szfgV8zGZZkur1B-B3W8b5AThTSlomZliOt8JQHJGH1m63sgDu1rg" type="text/javascript"></script>

<!-- Initially displayed and then hidden once we are running -->
<div id="loading">
 <p><strong>Download Data form is loading...</strong>
</div>

<!-- Displayed if this gadget needs oauth2 approval -->
<div id="approval" style="display: none">
 <a id="personalize"
              onclick="javascript:showOneSection('waiting'); return true"
                      target="approve">Click to authorize this gadget</a>
</div>

<!-- Displayed once the approval process begins... -->
<div id="waiting" style="display: none">
      Please click
            <a href="#" onclick="javascript:bootstrap()">I've approved access</a>
                  once you've approved access to your data.
</div>

<!-- Our main 'window' -->
<div id="main" style="display: none">

<form method="GET" action="https://mesonet.agron.iastate.edu/cscap/dl.py">
<input type="hidden" name="hash" value="usethesource"  />

<table>

<!-- Years -->
<tr><td width="25%">Years to include:
<br />(check all that apply)</td>

<td><input type="radio" name="years" value="all">Give me all years that exist!</input>
<br /><input type="radio" name="years" value="2011">2011</input>
<br /><input type="radio" name="years" value="2012">2012</input>
<br /><input type="radio" name="years" value="2013">2013</input>
<br /><input type="radio" name="years" value="2014">2014</input>
<br /><input type="radio" name="years" value="2015">2015</input>
</td></tr>

<!-- Treatments -->
<tr><td width="25%">Treatments to include:
<br />(check all that apply)</td>

<td><input type="radio" name="treatments" value="all">Give me all treatments!</input>
<br /><strong>Tillage</strong>
<br />input type="radio" name="treatments" value="TIL1">TIL1</input>
<br />input type="radio" name="treatments" value="TIL2">TIL2</input>
<br /><strong>Crop Rotations</strong>
<br />input type="radio" name="treatments" value="ROT1">ROT1</input>
<br />input type="radio" name="treatments" value="ROT2">ROT2</input>
</td></tr>

<!-- Variables -->
<tr><td width="25%">Data to export:
<br />(check all that apply)</td>

<td><input type="radio" name="data" value="all">Give me everything that exists!</input>
<br />input type="radio" name="data" value="AGR1">AGR1</input>
<br />input type="radio" name="data" value="AGR2">AGR2</input>
</td></tr>


<!-- Sites -->
<tr><td width="25%">Sites to include:
<br />(check all that apply)</td>

<td><input type="radio" name="sites" value="all">Give me all sites!</input>
<br />input type="radio" name="sites" value="NWREC">NWREC (IL)</input>
</td></tr>


<!-- Final Opts -->
<tr><td colspan="2">

<p>Some sites have data that were not collected (referred to as "DNC"). How 
do you want "DNC" represented?
<br /><select name="dnc">
<option value="dnc">DNC</option>
</select>

<p>Plots with data that is "missing" (caused by a lost lab analysis, gopher
damage, etc.) are included in the export for statistical purposes.  How
do you want "missing" data reflected?
<br /><select name="missing">
<option value=".">As a (.)</option>
<option value="-999">As (-999)</option>
<option value=" ">As a blank ( )</option>
</select>

<p>How do you want the data exported?
<br /><select name="format">
<option value="Excel">Excel (.xls)</option>
<option value="csv">Comma Delimited</option>
<option value="tab">Tab Delimited</option>
</select>

</td></tr>


<tr><td colspan="2">
<p><input type="submit" value="Submit!" />

</td></tr>

</table>

</form>

</div><!-- End of main -->
<script type="text/javascript">

/* called after gadgets are ready, now we need more apis */
function myinit(){
  google.load("gdata", "2.x");
  google.load("jquery", "1.7.1");
  google.load("jqueryui", "1.8.16");
  google.setOnLoadCallback(bootstrap);
}

/* Wait until google gadgets is fired up */
gadgets.util.registerOnLoadHandler(myinit);

</script>
]]></Content>
</Module>

